function GetMsg(e){let t={Class:[],Header:[],Footer:[],PrintTime:[],Other:[]},l=e=>e.match(/学年|课表|学号/)?"Header":e.match(/其他|\/无/)?"Footer":e.match(/星期/)?"Week":e.match(/^\d+-\d+/)?"Time":e.match(/.*?[#&*]$/)?"Name":e.match(/周数|学分/)?"Detail":e.match(/打印时间/)?"PrintTime":"Other",r={Week:[],Time:[],Name:[],Detail:[],Header:[],Footer:[],PrintTime:[],Other:[]};for(let t=0;t<e.length;++t){let a=e[t],m=a.str,h=a.y;r[l(m)].push([h,m])}r.Week.sort(((e,t)=>e[0]-t[0])),r.Time.sort(((e,t)=>e[0]-t[0])),r.Name.sort(((e,t)=>e[0]-t[0])),r.Detail.sort(((e,t)=>e[0]-t[0]));const a=r.Name.length;for(let e=0,l=r.Name;e<a;++e)t.Class.push({Class:l[e][1]});for(let e=0,l=r.Detail,a=-1;e<l.length;++e){let r=l[e][1];r.match(/周数/)?(++a,t.Class[a].Detail=r):t.Class[a].Detail+=r}const m=r.Detail[1][0]-r.Detail[0][0];let h=(e,t)=>m>e-t&&m>t-e;for(let e=0,l=0,m=r.Time.length;e<m;++e){let m=r.Time[e],o=[l];for(let e=1,t=0;l<a;o.push(++l),++e)if(t+=r.Name[l][0],h(t/e,m[0])){++l;break}for(let e=o.length-1;e>=0;--e)t.Class[o[e]].Time=m[1]}for(let e=0,l=0,m=r.Week.length;e<m;++e){let m=r.Week[e],o=[l];for(let e=1,t=0;l<a;o.push(++l),++e)if(t+=r.Name[l][0],h(t/e,m[0])){++l;break}for(let e=o.length-1;e>=0;--e)t.Class[o[e]].Week=m[1]}for(let e=r.Header,l=e.length-1;l>=0;--l){let r=e[l][1];r.match(/学期/)&&(t.Header.Semester=r),r.match(/课表/)&&(t.Header.StudentName=r.match(/(.*?)课表/)[1]),r.match(/学号/)&&(t.Header.StudentNum=r.match(/(\d+)/)[1])}t.PrintTime.Time=r.PrintTime[0][1].match(/[\d\-]+/)[0];for(let e=r.Other,l=e.length-1;l>=0;--l)t.Other[l.toString()]=e[l][1];r.Footer.sort(((e,t)=>e[0]-t[0]));let o="";for(let e=r.Footer,t=0;t<e.length;++t)o+=e[t][1];let i=o.match(/.*?[:;：；]/g);if(null!=i)for(let e=i.length-1;e>0;e--)t.Footer[e.toString()]=i[e].match(/\s*(.*?)[;；]/)[1];return t}export{GetMsg};